{% extends 'base.html' %}

{% block page %}My profile{% endblock %}

{% block content %}

<div class='container-fluid'>
<div class='row my-4'>
    <form action="" method="post" class='col-5'>
        <table class="table table-hover table-bordered">
            <div class='row'>
                <div class='col-7'>
                    <h3><b>My favorite albums</b></h3>
                </div>
                <div class='col-5'>
                    <button type="submit" name="album_button" value="delete" class="btn btn-danger col-12">Remove selected</button>
                </div>
            </div>
            <thead class="thead-light">
                {% if user.favorite_albums|length == 0 %}
                <tr>
                    <th scope="col"><center>No albums have been added yet</center></th>
                </tr>
                {% else %}
                <tr>
                    <th scope="col"></th>
                    <th scope="col"><center>Title</center></th>
                    <th scope="col"><center>Artist</center></th>
                    <th scope="col"><center>Release year</center></th>
                    <th scope="col"><center>Score</center></th>
                </tr>
                {% endif %}
            </thead>
            <tbody>
                {% for album in user.favorite_albums %}
                <tr>
                    <td><input type="checkbox" name="album_id" , value="{{ album.album.id }}"></td>
                    <td align="center">{{ album.album.title }}</td>
                    <td align="center">{{ album.album.artist }}</td>
                    <td align="center">
                        {% if album.album.year_released != None %}{{ album.album.year_released }}{% endif %}
                    </td>
                    <td align="center">
                        {% if album.rating != None %}{{ album.rating }}{% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </form>
    <form action="" method="post" class='col-4'>
        <table class="table table-hover table-bordered">
            <div class='row'>
                <div class='col-7'>
                    <h3><b>My favorite songs</b></h3>
                </div>
                <div class='col-5'>
                    <button type="submit" name="song_button" value="delete" class="btn btn-danger col-12">Remove selected</button>
                </div>
            </div>
            <thead class="thead-light">
                {% if user.favorite_songs|length == 0 %}
                <tr>
                    <th scope="col"><center>No Songs have been added yet</center></th>
                </tr>
                {% else %}
                <tr>
                    <th scope="col"></th>
                    <th scope="col"><center>Title</center></th>
                    <th scope="col"><center>Artist</center></th>
                    <th scope="col"><center>Album</center></th>
                    <th scope="col"><center>Score</center></th>
                </tr>
                {% endif %}
            </thead>
            <tbody>
                {% for song in user.favorite_songs %}
                <tr>
                    <td><input type="checkbox" name="song_id" , value="{{ song.song.id }}"></td>
                    <td align="center">{{ song.song.title }}</td>
                    <td align="center">{{ song.song.artist }}</td>
                    <td align="center">
                        {% if song.song.album != None %}{{ song.song.album }}{% endif %}
                    </td>
                    <td align="center">
                        {% if song.rating != None %}{{ song.rating }}{% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </form>
    <div class='col-3'>
        <h3><center><b>Add album</b></center></h3>
        <form action="" method="post" name="add_album">
            {{ album_form.hidden_tag() }}
            <div class='container-fluid'>
                <div class='row py-1'>
                    <div class='col-12'>
                        {{ album_form.a_title(class_='form-control') }}
                        {% for error in album_form.a_title.errors %}
                        <div class="alert alert-danger" role="alert">
                            [{{ error }}]
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class='row py-1'>
                    <div class='col-12'>
                        {{ album_form.a_artist(class_='form-control') }}
                        {% for error in album_form.a_artist.errors %}
                        <div class="alert alert-danger" role="alert">
                            [{{ error }}]
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class='row py-1'>
                    <div class='col-12'>
                        {{ album_form.year(class_='form-control') }}
                    </div>
                    <div class='col-12'>
                        {% for error in album_form.year.errors %}
                        <div class="alert alert-danger" role="alert">
                            [{{ error }}]
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class='row py-1'>
                    <div class='col-6'>
                        {{ album_form.a_score(class_='form-control') }}
                    </div>
                    <div class="col-6">
                        {{ album_form.a_submit(class_='form-control btn btn-primary col-12') }}
                    </div>
                </div>
                <div class='row py-1'>
                    <div class='col-12'>
                        {% for error in album_form.a_score.errors %}
                        <div class="alert alert-danger" role="alert">
                            [{{ error }}]
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="row">
                {% with messages = get_flashed_messages() %}
                {% if (messages and album_form.a_submit.data) %}
                    <div class="col-12">
                        {% for message in messages %}
                        <div class="alert alert-success">
                            {{ message }}
                        </div>
                        {% endfor %}
                    </div>
                {% endif %}
                {% endwith %}
                </div>
            </div>
        </form>
        <br>
        <h3><center><b>Add Song</b></center></h3>
        <form action="" method="post" name="add_song">
            {{ song_form.hidden_tag() }}
            <div class='container-fluid'>
                <div class='row py-1'>
                    <div class='col-12'>
                        {{ song_form.s_title(class_='form-control') }}
                        {% for error in song_form.s_title.errors %}
                        <div class="alert alert-danger" role="alert">
                            [{{ error }}]
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class='row py-1'>
                    <div class='col-12'>
                        {{ song_form.s_artist(class_='form-control') }}
                        {% for error in song_form.s_artist.errors %}
                        <div class="alert alert-danger" role="alert">
                            [{{ error }}]
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class='row py-1'>
                    <div class='col-12'>
                        {{ song_form.album(class_='form-control') }}
                        {% for error in song_form.album.errors %}
                        <div class="alert alert-danger" role="alert">
                            [{{ error }}]
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="row py-1">
                    <div class='col-6'>
                        {{ song_form.s_score(class_='form-control') }}
                    </div>
                    <div class="col-6">
                        {{ song_form.s_submit(class_='form-control btn btn-primary col-12') }}
                    </div>
                </div>
                <div class="row">
                    {% with messages = get_flashed_messages() %}
                    {% if (messages and song_form.s_submit.data) %}
                        <div class="col-12 py-1">
                            {% for message in messages %}
                            <div class="alert alert-success">
                                {{ message }}
                            </div>
                            {% endfor %}
                        </div>
                    {% endif %}
                    {% endwith %}
                </div>
            </div>
        </form>
    </div>
</div>
</div>

{% endblock %}